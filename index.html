<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>paddleBasket</title>
    <link href="https://fonts.googleapis.com/css?family=Baloo+Bhaina" rel="stylesheet">
    <style>
    *{
      padding: 0;
      margin: 0;
    }
       canvas{
         background: #eee;
         display: block;
         margin: auto;
         position: absolute;
         top: 0; left: 0; bottom: 0; right: 0;
       }
      h1, h2, h3{
        text-align: center;
        font-family: 'Baloo Bhaina', cursive;
      }
    </style>
</head>
<body>
<h1>paddleBasket</h1>
<h2>Score  <span id="score"></span></h2>
<h3><em>Use arrow keys to play!</em></h3>
<canvas id="myCanvas" width="860" height="640"></canvas>

<script>
  var canvas = document.getElementById("myCanvas");
  var field = canvas.getContext("2d");
  var paddleHeight = 10;
  var paddleWidth = 120;
  var paddleX = (canvas.width-paddleWidth)/2;
  var manImage = new Image();
  manImage.src = "parachuteMan.png";
  var planeImage = new Image();
  planeImage.src = "airplane.png";
  var generateX = function(){
    return Math.floor(Math.random() * 750);
  };
  var manX = generateX();
  var manY = 10;
  var ballRadius = 10;
  var leftPressed = false;
  var rightPressed = false;
  var planeX = 0;
  var planeY = 0;
  var score = 0;
  var tally = 0;
  var z = false;
  function drawMan(){
    field.drawImage(manImage, manX, manY);
  }
  function drawPlane(){
    field.drawImage(planeImage, planeX, planeY);
  }
  function drawPaddle() {
    field.beginPath();
      field.rect(paddleX, canvas.height-paddleHeight, paddleWidth, paddleHeight);
      field.fillStyle = "#03A6FF";
      field.fill();
    field.closePath();
  }
  function draw() {
    //Clear
    field.clearRect(0,0, canvas.width, canvas.height);
    //Draw Sprites
    if(planeX == manX && z== false){
      z = true;
      console.log(manX);
      drawMan();
      manY+=1;
    }
    if(planeX > canvas.width){
      planeX = 0;
      z = false;
    }
    drawPaddle();
    drawPlane();
    planeX+=1;
    //Change Position
    if(manY > 10){
      manY+=1;
    }

    if(manY > canvas.height) {
        if(manX > paddleX && manX < paddleX + paddleWidth) {
            score+=1;
            tally+=1;
            manX = generateX();
            manY = 0;
            console.log(score);
            // document.getElementById("score").innerHTML = score+"/"+tally;
        }
        else{
          score-=1;
          tally+=1;
          manX = generateX();
          manY = 0;
          console.log(score);
          // document.getElementById("score").innerHTML = score+"/"+tally;
        }
      }
    if(rightPressed && paddleX < canvas.width-paddleWidth) {
      paddleX += 4;
    }
    else if(leftPressed && paddleX > 0) {
      paddleX -= 4;
    }
  }
  function keyDownHandler(e) {
      if(e.keyCode == 39) {
          rightPressed = true;
      }
      else if(e.keyCode == 37) {
          leftPressed = true;
      }
  }

  function keyUpHandler(e) {
      if(e.keyCode == 39) {
          rightPressed = false;
      }
      else if(e.keyCode == 37) {
          leftPressed = false;
      }
  }
  document.addEventListener("keydown", keyDownHandler, false);
  document.addEventListener("keyup", keyUpHandler, false);

  setInterval(draw, 5);

</script>

</body>
</html>
